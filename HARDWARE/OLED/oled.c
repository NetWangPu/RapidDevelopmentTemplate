#include "sys.h"
#include "stdlib.h"
#include "OLED.h"
#include "HardwareIIC.h"

/**
 * 使用修改2个点
 * 1. 修改OLED_WrCmd函数中的I2C写入函数
 * 2. 修改OLED_WrDat函数中的I2C写入函数
 */

#define XLevelL 0x00							 // 设置列低地址
#define XLevelH 0x10							 // 设置列高地址
#define XLevel ((XLevelH & 0x0F) * 16 + XLevelL) // 列地址0~255
#define Max_Column 128							 // 最大列数
#define Max_Row 64								 // 最大行数
#define Brightness 0xCF							 // 设置显示亮度

#define X_WIDTH 128		  // 屏幕宽度
#define Y_WIDTH 64		  // 屏幕高度
#define OLED_ADDRESS 0x78 // 0x3C*2, I2C地址
#define I2Cx I2C1		  // 选择I2C1作为通信接口

/**
 * 6x8字体
 * 取模工具:PCtoLCD2002完美版
 * 取模型设置：c51模式 阴码 列行式 逆序
 */
const u8 F6x8[] =
	{
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // sp
		0x00, 0x00, 0x00, 0x2f, 0x00, 0x00, // !
		0x00, 0x00, 0x07, 0x00, 0x07, 0x00, // "
		0x00, 0x14, 0x7f, 0x14, 0x7f, 0x14, // #
		0x00, 0x24, 0x2a, 0x7f, 0x2a, 0x12, // $
		0x00, 0x62, 0x64, 0x08, 0x13, 0x23, // %
		0x00, 0x36, 0x49, 0x55, 0x22, 0x50, // &
		0x00, 0x00, 0x05, 0x03, 0x00, 0x00, // '
		0x00, 0x00, 0x1c, 0x22, 0x41, 0x00, // (
		0x00, 0x00, 0x41, 0x22, 0x1c, 0x00, // )
		0x00, 0x14, 0x08, 0x3E, 0x08, 0x14, // *
		0x00, 0x08, 0x08, 0x3E, 0x08, 0x08, // +
		0x00, 0x00, 0x00, 0xA0, 0x60, 0x00, // ,
		0x00, 0x08, 0x08, 0x08, 0x08, 0x08, // -
		0x00, 0x00, 0x60, 0x60, 0x00, 0x00, // .
		0x00, 0x20, 0x10, 0x08, 0x04, 0x02, // /
		0x00, 0x3E, 0x51, 0x49, 0x45, 0x3E, // 0
		0x00, 0x00, 0x42, 0x7F, 0x40, 0x00, // 1
		0x00, 0x42, 0x61, 0x51, 0x49, 0x46, // 2
		0x00, 0x21, 0x41, 0x45, 0x4B, 0x31, // 3
		0x00, 0x18, 0x14, 0x12, 0x7F, 0x10, // 4
		0x00, 0x27, 0x45, 0x45, 0x45, 0x39, // 5
		0x00, 0x3C, 0x4A, 0x49, 0x49, 0x30, // 6
		0x00, 0x01, 0x71, 0x09, 0x05, 0x03, // 7
		0x00, 0x36, 0x49, 0x49, 0x49, 0x36, // 8
		0x00, 0x06, 0x49, 0x49, 0x29, 0x1E, // 9
		0x00, 0x00, 0x36, 0x36, 0x00, 0x00, // :
		0x00, 0x00, 0x56, 0x36, 0x00, 0x00, // ;
		0x00, 0x08, 0x14, 0x22, 0x41, 0x00, // <
		0x00, 0x14, 0x14, 0x14, 0x14, 0x14, // =
		0x00, 0x00, 0x41, 0x22, 0x14, 0x08, // >
		0x00, 0x02, 0x01, 0x51, 0x09, 0x06, // ?
		0x00, 0x32, 0x49, 0x59, 0x51, 0x3E, // @
		0x00, 0x7C, 0x12, 0x11, 0x12, 0x7C, // A
		0x00, 0x7F, 0x49, 0x49, 0x49, 0x36, // B
		0x00, 0x3E, 0x41, 0x41, 0x41, 0x22, // C
		0x00, 0x7F, 0x41, 0x41, 0x22, 0x1C, // D
		0x00, 0x7F, 0x49, 0x49, 0x49, 0x41, // E
		0x00, 0x7F, 0x09, 0x09, 0x09, 0x01, // F
		0x00, 0x3E, 0x41, 0x49, 0x49, 0x7A, // G
		0x00, 0x7F, 0x08, 0x08, 0x08, 0x7F, // H
		0x00, 0x00, 0x41, 0x7F, 0x41, 0x00, // I
		0x00, 0x20, 0x40, 0x41, 0x3F, 0x01, // J
		0x00, 0x7F, 0x08, 0x14, 0x22, 0x41, // K
		0x00, 0x7F, 0x40, 0x40, 0x40, 0x40, // L
		0x00, 0x7F, 0x02, 0x0C, 0x02, 0x7F, // M
		0x00, 0x7F, 0x04, 0x08, 0x10, 0x7F, // N
		0x00, 0x3E, 0x41, 0x41, 0x41, 0x3E, // O
		0x00, 0x7F, 0x09, 0x09, 0x09, 0x06, // P
		0x00, 0x3E, 0x41, 0x51, 0x21, 0x5E, // Q
		0x00, 0x7F, 0x09, 0x19, 0x29, 0x46, // R
		0x00, 0x46, 0x49, 0x49, 0x49, 0x31, // S
		0x00, 0x01, 0x01, 0x7F, 0x01, 0x01, // T
		0x00, 0x3F, 0x40, 0x40, 0x40, 0x3F, // U
		0x00, 0x1F, 0x20, 0x40, 0x20, 0x1F, // V
		0x00, 0x3F, 0x40, 0x38, 0x40, 0x3F, // W
		0x00, 0x63, 0x14, 0x08, 0x14, 0x63, // X
		0x00, 0x07, 0x08, 0x70, 0x08, 0x07, // Y
		0x00, 0x61, 0x51, 0x49, 0x45, 0x43, // Z
		0x00, 0x00, 0x7F, 0x41, 0x41, 0x00, // [
		0x00, 0x55, 0x2A, 0x55, 0x2A, 0x55, // 55
		0x00, 0x00, 0x41, 0x41, 0x7F, 0x00, // ]
		0x00, 0x04, 0x02, 0x01, 0x02, 0x04, // ^
		0x00, 0x40, 0x40, 0x40, 0x40, 0x40, // _
		0x00, 0x00, 0x01, 0x02, 0x04, 0x00, // '
		0x00, 0x20, 0x54, 0x54, 0x54, 0x78, // a
		0x00, 0x7F, 0x48, 0x44, 0x44, 0x38, // b
		0x00, 0x38, 0x44, 0x44, 0x44, 0x20, // c
		0x00, 0x38, 0x44, 0x44, 0x48, 0x7F, // d
		0x00, 0x38, 0x54, 0x54, 0x54, 0x18, // e
		0x00, 0x08, 0x7E, 0x09, 0x01, 0x02, // f
		0x00, 0x18, 0xA4, 0xA4, 0xA4, 0x7C, // g
		0x00, 0x7F, 0x08, 0x04, 0x04, 0x78, // h
		0x00, 0x00, 0x44, 0x7D, 0x40, 0x00, // i
		0x00, 0x40, 0x80, 0x84, 0x7D, 0x00, // j
		0x00, 0x7F, 0x10, 0x28, 0x44, 0x00, // k
		0x00, 0x00, 0x41, 0x7F, 0x40, 0x00, // l
		0x00, 0x7C, 0x04, 0x18, 0x04, 0x78, // m
		0x00, 0x7C, 0x08, 0x04, 0x04, 0x78, // n
		0x00, 0x38, 0x44, 0x44, 0x44, 0x38, // o
		0x00, 0xFC, 0x24, 0x24, 0x24, 0x18, // p
		0x00, 0x18, 0x24, 0x24, 0x18, 0xFC, // q
		0x00, 0x7C, 0x08, 0x04, 0x04, 0x08, // r
		0x00, 0x48, 0x54, 0x54, 0x54, 0x20, // s
		0x00, 0x04, 0x3F, 0x44, 0x40, 0x20, // t
		0x00, 0x3C, 0x40, 0x40, 0x20, 0x7C, // u
		0x00, 0x1C, 0x20, 0x40, 0x20, 0x1C, // v
		0x00, 0x3C, 0x40, 0x30, 0x40, 0x3C, // w
		0x00, 0x44, 0x28, 0x10, 0x28, 0x44, // x
		0x00, 0x1C, 0xA0, 0xA0, 0xA0, 0x7C, // y
		0x00, 0x44, 0x64, 0x54, 0x4C, 0x44, // z
		0x14, 0x14, 0x14, 0x14, 0x14, 0x14	// horiz lines
};

/**
 * 16x16字体
 * 取模工具:PCtoLCD2002完美版
 * 取模型设置：c51模式 阴码 列行式 逆序
 */
const u8 F16x16_Idx[] =
	{
		"连接中"};

/**
 * 16x16字体
 * 取模工具:PCtoLCD2002完美版
 * 取模型设置：c51模式 阴码 列行式 逆序
 */
const u8 F16x16[] =
	{
		0x40, 0x40, 0x42, 0xCC, 0x00, 0x04, 0x44, 0x64, 0x5C, 0x47, 0xF4, 0x44, 0x44, 0x44, 0x04, 0x00, 0x00, 0x40, 0x20, 0x1F, 0x20, 0x44, 0x44, 0x44, 0x44, 0x44, 0x7F, 0x44, 0x44, 0x44, 0x44, 0x00, /*"连",0*/
		0x10, 0x10, 0x10, 0xFF, 0x10, 0x50, 0x44, 0x54, 0x65, 0xC6, 0x44, 0x64, 0x54, 0x44, 0x40, 0x00, 0x04, 0x44, 0x82, 0x7F, 0x01, 0x82, 0x82, 0x4A, 0x56, 0x23, 0x22, 0x52, 0x4E, 0x82, 0x02, 0x00, /*"接",1*/
		0x00, 0x00, 0xF0, 0x10, 0x10, 0x10, 0x10, 0xFF, 0x10, 0x10, 0x10, 0x10, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0F, 0x04, 0x04, 0x04, 0x04, 0xFF, 0x04, 0x04, 0x04, 0x04, 0x0F, 0x00, 0x00, 0x00, /*"中",2*/

};
//======================================================
// 128X64I液晶底层驱动[8X16]字体库
// 设计者: powerint
// 描  述: [8X16]西文字符的字模数据 (纵向取模,字节倒序)
// !"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\]^_`abcdefghijklmnopqrstuvwxyz{|}~
//======================================================
const u8 F8X16[] =
	{
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, // 0
		0x00, 0x00, 0x00, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x33, 0x30, 0x00, 0x00, 0x00, //! 1
		0x00, 0x10, 0x0C, 0x06, 0x10, 0x0C, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //"2
		0x40, 0xC0, 0x78, 0x40, 0xC0, 0x78, 0x40, 0x00, 0x04, 0x3F, 0x04, 0x04, 0x3F, 0x04, 0x04, 0x00, // #3
		0x00, 0x70, 0x88, 0xFC, 0x08, 0x30, 0x00, 0x00, 0x00, 0x18, 0x20, 0xFF, 0x21, 0x1E, 0x00, 0x00, //$4
		0xF0, 0x08, 0xF0, 0x00, 0xE0, 0x18, 0x00, 0x00, 0x00, 0x21, 0x1C, 0x03, 0x1E, 0x21, 0x1E, 0x00, //%5
		0x00, 0xF0, 0x08, 0x88, 0x70, 0x00, 0x00, 0x00, 0x1E, 0x21, 0x23, 0x24, 0x19, 0x27, 0x21, 0x10, //&6
		0x10, 0x16, 0x0E, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //'7
		0x00, 0x00, 0x00, 0xE0, 0x18, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x07, 0x18, 0x20, 0x40, 0x00, //(8
		0x00, 0x02, 0x04, 0x18, 0xE0, 0x00, 0x00, 0x00, 0x00, 0x40, 0x20, 0x18, 0x07, 0x00, 0x00, 0x00, //)9
		0x40, 0x40, 0x80, 0xF0, 0x80, 0x40, 0x40, 0x00, 0x02, 0x02, 0x01, 0x0F, 0x01, 0x02, 0x02, 0x00, //*10
		0x00, 0x00, 0x00, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x1F, 0x01, 0x01, 0x01, 0x00, //+11
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xB0, 0x70, 0x00, 0x00, 0x00, 0x00, 0x00, //,12
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x01, //-13
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00, 0x00, 0x00, //.14
		0x00, 0x00, 0x00, 0x00, 0x80, 0x60, 0x18, 0x04, 0x00, 0x60, 0x18, 0x06, 0x01, 0x00, 0x00, 0x00, /// 15
		0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x10, 0x0F, 0x00, // 016
		0x00, 0x10, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, // 117
		0x00, 0x70, 0x08, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x30, 0x28, 0x24, 0x22, 0x21, 0x30, 0x00, // 218
		0x00, 0x30, 0x08, 0x88, 0x88, 0x48, 0x30, 0x00, 0x00, 0x18, 0x20, 0x20, 0x20, 0x11, 0x0E, 0x00, // 319
		0x00, 0x00, 0xC0, 0x20, 0x10, 0xF8, 0x00, 0x00, 0x00, 0x07, 0x04, 0x24, 0x24, 0x3F, 0x24, 0x00, // 420
		0x00, 0xF8, 0x08, 0x88, 0x88, 0x08, 0x08, 0x00, 0x00, 0x19, 0x21, 0x20, 0x20, 0x11, 0x0E, 0x00, // 521
		0x00, 0xE0, 0x10, 0x88, 0x88, 0x18, 0x00, 0x00, 0x00, 0x0F, 0x11, 0x20, 0x20, 0x11, 0x0E, 0x00, // 622
		0x00, 0x38, 0x08, 0x08, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x00, 0x00, 0x00, 0x00, // 723
		0x00, 0x70, 0x88, 0x08, 0x08, 0x88, 0x70, 0x00, 0x00, 0x1C, 0x22, 0x21, 0x21, 0x22, 0x1C, 0x00, // 824
		0x00, 0xE0, 0x10, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x00, 0x00, 0x31, 0x22, 0x22, 0x11, 0x0F, 0x00, // 925
		0x00, 0x00, 0x00, 0xC0, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x30, 0x30, 0x00, 0x00, 0x00, //: 26
		0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x60, 0x00, 0x00, 0x00, 0x00, //;27
		0x00, 0x00, 0x80, 0x40, 0x20, 0x10, 0x08, 0x00, 0x00, 0x01, 0x02, 0x04, 0x08, 0x10, 0x20, 0x00, //<28
		0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x40, 0x00, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x04, 0x00, //=29
		0x00, 0x08, 0x10, 0x20, 0x40, 0x80, 0x00, 0x00, 0x00, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01, 0x00, //>30
		0x00, 0x70, 0x48, 0x08, 0x08, 0x08, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x30, 0x36, 0x01, 0x00, 0x00, //?31
		0xC0, 0x30, 0xC8, 0x28, 0xE8, 0x10, 0xE0, 0x00, 0x07, 0x18, 0x27, 0x24, 0x23, 0x14, 0x0B, 0x00, //@32
		0x00, 0x00, 0xC0, 0x38, 0xE0, 0x00, 0x00, 0x00, 0x20, 0x3C, 0x23, 0x02, 0x02, 0x27, 0x38, 0x20, // A33
		0x08, 0xF8, 0x88, 0x88, 0x88, 0x70, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x11, 0x0E, 0x00, // B34
		0xC0, 0x30, 0x08, 0x08, 0x08, 0x08, 0x38, 0x00, 0x07, 0x18, 0x20, 0x20, 0x20, 0x10, 0x08, 0x00, // C35
		0x08, 0xF8, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x10, 0x0F, 0x00, // D36
		0x08, 0xF8, 0x88, 0x88, 0xE8, 0x08, 0x10, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x23, 0x20, 0x18, 0x00, // E37
		0x08, 0xF8, 0x88, 0x88, 0xE8, 0x08, 0x10, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x03, 0x00, 0x00, 0x00, // F38
		0xC0, 0x30, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00, 0x07, 0x18, 0x20, 0x20, 0x22, 0x1E, 0x02, 0x00, // G39
		0x08, 0xF8, 0x08, 0x00, 0x00, 0x08, 0xF8, 0x08, 0x20, 0x3F, 0x21, 0x01, 0x01, 0x21, 0x3F, 0x20, // H40
		0x00, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, // I41
		0x00, 0x00, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x00, 0xC0, 0x80, 0x80, 0x80, 0x7F, 0x00, 0x00, 0x00, // J42
		0x08, 0xF8, 0x88, 0xC0, 0x28, 0x18, 0x08, 0x00, 0x20, 0x3F, 0x20, 0x01, 0x26, 0x38, 0x20, 0x00, // K43
		0x08, 0xF8, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x20, 0x20, 0x20, 0x30, 0x00, // L44
		0x08, 0xF8, 0xF8, 0x00, 0xF8, 0xF8, 0x08, 0x00, 0x20, 0x3F, 0x00, 0x3F, 0x00, 0x3F, 0x20, 0x00, // M45
		0x08, 0xF8, 0x30, 0xC0, 0x00, 0x08, 0xF8, 0x08, 0x20, 0x3F, 0x20, 0x00, 0x07, 0x18, 0x3F, 0x00, // N46
		0xE0, 0x10, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x0F, 0x10, 0x20, 0x20, 0x20, 0x10, 0x0F, 0x00, // O47
		0x08, 0xF8, 0x08, 0x08, 0x08, 0x08, 0xF0, 0x00, 0x20, 0x3F, 0x21, 0x01, 0x01, 0x01, 0x00, 0x00, // P48
		0xE0, 0x10, 0x08, 0x08, 0x08, 0x10, 0xE0, 0x00, 0x0F, 0x18, 0x24, 0x24, 0x38, 0x50, 0x4F, 0x00, // Q49
		0x08, 0xF8, 0x88, 0x88, 0x88, 0x88, 0x70, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x03, 0x0C, 0x30, 0x20, // R50
		0x00, 0x70, 0x88, 0x08, 0x08, 0x08, 0x38, 0x00, 0x00, 0x38, 0x20, 0x21, 0x21, 0x22, 0x1C, 0x00, // S51
		0x18, 0x08, 0x08, 0xF8, 0x08, 0x08, 0x18, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x00, 0x00, // T52
		0x08, 0xF8, 0x08, 0x00, 0x00, 0x08, 0xF8, 0x08, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00, // U53
		0x08, 0x78, 0x88, 0x00, 0x00, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x07, 0x38, 0x0E, 0x01, 0x00, 0x00, // V54
		0xF8, 0x08, 0x00, 0xF8, 0x00, 0x08, 0xF8, 0x00, 0x03, 0x3C, 0x07, 0x00, 0x07, 0x3C, 0x03, 0x00, // W55
		0x08, 0x18, 0x68, 0x80, 0x80, 0x68, 0x18, 0x08, 0x20, 0x30, 0x2C, 0x03, 0x03, 0x2C, 0x30, 0x20, // X56
		0x08, 0x38, 0xC8, 0x00, 0xC8, 0x38, 0x08, 0x00, 0x00, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x00, 0x00, // Y57
		0x10, 0x08, 0x08, 0x08, 0xC8, 0x38, 0x08, 0x00, 0x20, 0x38, 0x26, 0x21, 0x20, 0x20, 0x18, 0x00, // Z58
		0x00, 0x00, 0x00, 0xFE, 0x02, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x7F, 0x40, 0x40, 0x40, 0x00, //[59
		0x00, 0x0C, 0x30, 0xC0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x06, 0x38, 0xC0, 0x00, //\60
		0x00, 0x02, 0x02, 0x02, 0xFE, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x40, 0x7F, 0x00, 0x00, 0x00, //]61
		0x00, 0x00, 0x04, 0x02, 0x02, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //^62
		0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, //_63
		0x00, 0x02, 0x02, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //`64
		0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x19, 0x24, 0x22, 0x22, 0x22, 0x3F, 0x20, // a65
		0x08, 0xF8, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x11, 0x20, 0x20, 0x11, 0x0E, 0x00, // b66
		0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0x20, 0x11, 0x00, // c67
		0x00, 0x00, 0x00, 0x80, 0x80, 0x88, 0xF8, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0x10, 0x3F, 0x20, // d68
		0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x1F, 0x22, 0x22, 0x22, 0x22, 0x13, 0x00, // e69
		0x00, 0x80, 0x80, 0xF0, 0x88, 0x88, 0x88, 0x18, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, // f70
		0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x6B, 0x94, 0x94, 0x94, 0x93, 0x60, 0x00, // g71
		0x08, 0xF8, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x3F, 0x21, 0x00, 0x00, 0x20, 0x3F, 0x20, // h72
		0x00, 0x80, 0x98, 0x98, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, // i73
		0x00, 0x00, 0x00, 0x80, 0x98, 0x98, 0x00, 0x00, 0x00, 0xC0, 0x80, 0x80, 0x80, 0x7F, 0x00, 0x00, // j74
		0x08, 0xF8, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x20, 0x3F, 0x24, 0x02, 0x2D, 0x30, 0x20, 0x00, // k75
		0x00, 0x08, 0x08, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00, 0x20, 0x20, 0x3F, 0x20, 0x20, 0x00, 0x00, // l76
		0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x20, 0x3F, 0x20, 0x00, 0x3F, 0x20, 0x00, 0x3F, // m77
		0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x3F, 0x21, 0x00, 0x00, 0x20, 0x3F, 0x20, // n78
		0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x20, 0x1F, 0x00, // o79
		0x80, 0x80, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0xFF, 0xA1, 0x20, 0x20, 0x11, 0x0E, 0x00, // p80
		0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x0E, 0x11, 0x20, 0x20, 0xA0, 0xFF, 0x80, // q81
		0x80, 0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x20, 0x20, 0x3F, 0x21, 0x20, 0x00, 0x01, 0x00, // r82
		0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x33, 0x24, 0x24, 0x24, 0x24, 0x19, 0x00, // s83
		0x00, 0x80, 0x80, 0xE0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x00, 0x00, // t84
		0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x1F, 0x20, 0x20, 0x20, 0x10, 0x3F, 0x20, // u85
		0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x00, 0x01, 0x0E, 0x30, 0x08, 0x06, 0x01, 0x00, // v86
		0x80, 0x80, 0x00, 0x80, 0x00, 0x80, 0x80, 0x80, 0x0F, 0x30, 0x0C, 0x03, 0x0C, 0x30, 0x0F, 0x00, // w87
		0x00, 0x80, 0x80, 0x00, 0x80, 0x80, 0x80, 0x00, 0x00, 0x20, 0x31, 0x2E, 0x0E, 0x31, 0x20, 0x00, // x88
		0x80, 0x80, 0x80, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x81, 0x8E, 0x70, 0x18, 0x06, 0x01, 0x00, // y89
		0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x21, 0x30, 0x2C, 0x22, 0x21, 0x30, 0x00, // z90
		0x00, 0x00, 0x00, 0x00, 0x80, 0x7C, 0x02, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3F, 0x40, 0x40, //{91
		0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x00, 0x00, 0x00, //|92
		0x00, 0x02, 0x02, 0x7C, 0x80, 0x00, 0x00, 0x00, 0x00, 0x40, 0x40, 0x3F, 0x00, 0x00, 0x00, 0x00, //}93
		0x00, 0x06, 0x01, 0x01, 0x02, 0x02, 0x04, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, //~94

};
/* 生成实心菱形图标的16*16点阵*/
const u8 nonside[] =
	{
		0x00, 0x00, 0x80, 0xC0, 0xE0, 0xF0, 0xF8, 0xFC, 0xF8, 0xF0, 0xE0, 0xC0, 0x80, 0x00, 0x00, 0x00,
		0x00, 0x00, 0x00, 0x01, 0x03, 0x07, 0x0F, 0x1F, 0x0F, 0x07, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, // ◆0,
};

/**
 * @brief  OLED写命令
 * @param  Command 要写入的命令
 * @retval 无
 */
void OLED_WrCmd(u8 cmd)
{
	// I2C_WriteByte(0x00, cmd);
	I2C_WriteByte(0x00, cmd, OLED_ADDRESS);
}

/**
 * @brief  OLED写数据
 * @param  Data 要写入的数据
 * @retval 无
 */
void OLED_WrDat(u8 data)
{
	// I2C_WriteByte(0x40, data);
	I2C_WriteByte(0x40, data, OLED_ADDRESS);
}

/*设置起始地址
 *Y轴是按8格递进的，y轴0~63，只能按8格的倍数显示，
 *因为列行式只能按8个字节进行
 */
/// @brief 设置起始地址
/// @param x 起始地址x
/// @param y 起始地址y
void OLED_Set_Pos(u8 x, u8 y)
{
	OLED_WrCmd(0xb0 + (y >> 3));
	OLED_WrCmd(((x & 0xf0) >> 4) | 0x10);
	OLED_WrCmd((x & 0x0f) | 0x01);
}

/// @brief 填充指定数据
/// @param bmp_data  要填充的数据
void OLED_Fill(u8 bmp_data)
{
	u8 y, x;
	for (y = 0; y < 8; y++)
	{
		OLED_WrCmd(0xb0 + y);
		OLED_WrCmd(0x01);
		OLED_WrCmd(0x10);
		for (x = 0; x < X_WIDTH; x++)
			OLED_WrDat(bmp_data);
	}
}

/// @brief 清屏
void OLED_CLS(void)
{
	u8 y, x;
	for (y = 0; y < 8; y++)
	{
		OLED_WrCmd(0xb0 + y);
		OLED_WrCmd(0x01);
		OLED_WrCmd(0x10);
		for (x = 0; x < X_WIDTH; x++)
			OLED_WrDat(0);
	}
}

/// @brief 清除一行
/// @param y 要清除的行
void OLED_CLS_y(char y)
{
	u8 x;

	OLED_WrCmd(0xb0 + (y >> 3));
	OLED_WrCmd(0x01);
	OLED_WrCmd(0x10);
	for (x = 0; x < X_WIDTH; x++)
	{
		OLED_WrDat(0);
	}
}

/// @brief 清除一行上的一块区域y=0-63
/// @param start_x 起始x
/// @param start_y 起始y
/// @param width 宽度
void OLED_CLS_line_area(u8 start_x, u8 start_y, u8 width)
{
	u8 x;

	OLED_WrCmd(0xb0 + (start_y >> 3));
	OLED_WrCmd(0x01);
	OLED_WrCmd(0x10);
	for (x = start_x; x < width; x++)
	{
		OLED_WrDat(0);
	}
}

/// @brief  OLED内部延迟函数
/// @param ms  延迟时间
void OLED_DLY_ms(u16 ms)
{
	u16 a;
	while (ms)
	{
		a = 1335;
		while (a--)
			;
		ms--;
	}
	return;
}

/// @brief  绘制一个点
/// @param x  x坐标
/// @param y  y坐标
void OLED_PutPixel(u8 x, u8 y)
{
	u8 data1; // data1当前点的数据

	// OLED_Set_Pos(x,y);
	data1 = 0x01 << (y % 8);
	OLED_WrCmd(0xb0 + (y >> 3));
	OLED_WrCmd(((x & 0xf0) >> 4) | 0x10);
	OLED_WrCmd((x & 0x0f) | 0x00);
	OLED_WrDat(data1);
}

/// @brief  绘制一列
/// @param x  x坐标
/// @param y  y坐标
/// @param data  数据
void OLED_Put_Column(u8 x, u8 y, u8 data)
{
	OLED_WrCmd(0xb0 + (y >> 3));
	OLED_WrCmd(((x & 0xf0) >> 4) | 0x10);
	OLED_WrCmd((x & 0x0f) | 0x00);
	OLED_WrDat(data);
}

/// @brief  绘制一个实心矩形
/// @param x1  左上角x坐标
/// @param y1  左上角y坐标
/// @param x2  右下角x坐标
/// @param y2  右下角y坐标
/// @param gif  是否延时
void OLED_Rectangle(u8 x1, u8 y1, u8 x2, u8 y2, u8 gif)
{
	u8 n;
	OLED_Set_Pos(x1, y1);
	for (n = x1; n <= x2; n++)
	{
		OLED_WrDat(0x01);
		if (gif)
			OLED_DLY_ms(1);
	}
	for (n = y1; n <= y2; n++)
	{
		OLED_Set_Pos(x1, n);
		OLED_WrDat(0x01);
		OLED_Set_Pos(x2, n);
		OLED_WrDat(0x01);
		if (gif)
			OLED_DLY_ms(1);
	}
	OLED_Set_Pos(x1, y2);
	for (n = x1; n <= x2; n++)
	{
		OLED_WrDat(0x01);
		if (gif)
			OLED_DLY_ms(1);
	}
}

/// @brief  输出6*8的字符串
/// @param x  x轴的坐标
/// @param y  y轴的坐标
/// @param ch   字符串
/// @param F6x8  字库
void OLED_P6x8Str(u8 x, u8 y, u8 *ch, const u8 *F6x8)
{
	u8 c = 0, i = 0, j = 0;

	while (*(ch + j) != '\0')
	{
		c = *(ch + j) - 32;
		if (x > 126)
		{
			x = 0;
			y++;
		}
		OLED_Set_Pos(x, y);
		for (i = 0; i < 6; i++)
		{
			OLED_WrDat(*(F6x8 + c * 6 + i));
		}
		x += 6;
		j++;
	}
}

/// @brief  输出8*16的字符串
/// @param x  x轴的坐标
/// @param y  y轴的坐标
/// @param ch   字符串
/// @param F8x16  字库
void OLED_P8x16Str(u8 x, u8 y, u8 *ch, const u8 *F8x16)
{
	u8 c = 0, i = 0, j = 0;

	while (*(ch + j) != '\0')
	{
		c = *(ch + j) - 32;
		if (x > 120)
		{
			x = 0;
			y++;
		}
		OLED_Set_Pos(x, y);
		for (i = 0; i < 8; i++)
		{
			OLED_WrDat(*(F8x16 + c * 16 + i));
		}
		OLED_Set_Pos(x, y + 8);
		for (i = 0; i < 8; i++)
		{
			OLED_WrDat(*(F8x16 + c * 16 + i + 8));
		}
		x += 8;
		j++;
	}
}

/// @brief  输出汉字字符串
/// @param x  x轴的坐标
/// @param y  y轴的坐标
/// @param ch
/// @param F14x16_Idx
/// @param F14x16
void OLED_P14x16Str(u8 x, u8 y, u8 ch[], const u8 *F14x16_Idx, const u8 *F14x16)
{
	u8 wm = 0, ii = 0;
	u16 adder = 1;

	while (ch[ii] != '\0')
	{
		wm = 0;
		adder = 1;
		while (*(F14x16_Idx + wm) > 127)
		{
			if (*(F14x16_Idx + wm) == ch[ii])
			{
				if (*(F14x16_Idx + wm + 1) == ch[ii + 1])
				{
					adder = wm * 14;
					break;
				}
			}
			wm += 2;
		}
		if (x > 118)
		{
			x = 0;
			y++;
		}
		OLED_Set_Pos(x, y);
		if (adder != 1) // 显示汉字
		{
			OLED_Set_Pos(x, y);
			for (wm = 0; wm < 14; wm++)
			{
				OLED_WrDat(*(F14x16 + adder));
				adder += 1;
			}
			OLED_Set_Pos(x, y + 1);
			for (wm = 0; wm < 14; wm++)
			{
				OLED_WrDat(*(F14x16 + adder));
				adder += 1;
			}
		}
		else // 显示空白字符
		{
			ii += 1;
			OLED_Set_Pos(x, y);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(0);
			}
			OLED_Set_Pos(x, y + 1);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(0);
			}
		}
		x += 14;
		ii += 2;
	}
}

/// @brief 输出汉字字符串
/// @param x x轴的坐标
/// @param y y轴的坐标
/// @param ch 字符串
/// @param F16x16_Idx 字库索引
/// @param F16x16 字库
void OLED_P16x16Str(u8 x, u8 y, u8 *ch, const u8 *F16x16_Idx, const u8 *F16x16)
{
	u8 wm = 0, ii = 0;
	u16 adder = 1;

	while (*(ch + ii) != '\0')
	{
		wm = 0;
		adder = 1;
		while (*(F16x16_Idx + wm) > 127)
		{
			if (*(F16x16_Idx + wm) == *(ch + ii))
			{
				if (*(F16x16_Idx + wm + 1) == *(ch + ii + 1))
				{
					adder = wm * 16;
					break;
				}
			}
			wm += 2;
		}
		if (x > 118)
		{
			x = 0;
			y++;
		}
		OLED_Set_Pos(x, y);
		if (adder != 1) // 显示汉字
		{
			OLED_Set_Pos(x, y);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(*(F16x16 + adder));
				adder += 1;
			}
			OLED_Set_Pos(x, y + 8);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(*(F16x16 + adder));
				adder += 1;
			}
		}
		else // 显示空白字符
		{
			ii += 1;
			OLED_Set_Pos(x, y);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(0);
			}
			OLED_Set_Pos(x, y + 1);
			for (wm = 0; wm < 16; wm++)
			{
				OLED_WrDat(0);
			}
		}
		x += 16;
		ii += 2;
	}
}

/// @brief  输出汉字和字符混合字符串
/// @param x 起始坐标x
/// @param y 起始坐标y
/// @param ch 字符串
/// @param char_size 字符大小
/// @param ascii_size 字符大小
/// @note *Y轴是按8格递进的，y轴0~63，只能按8格的倍数显示，因为列行式只能按8个字节进行
void OLED_Print(u8 x, u8 y, u8 *ch, u8 char_size, u8 ascii_size)
{
	u8 ch2[3];
	u8 ii = 0;
	while (*(ch + ii) != '\0')
	{
		if (*(ch + ii) > 127) // 大于127为中文，小于等于127为ASCII
		{
			ch2[0] = *(ch + ii);
			ch2[1] = *(ch + ii + 1);
			ch2[2] = '\0';								   // 汉字为两个字节
			OLED_P16x16Str(x, y, ch2, F16x16_Idx, F16x16); // 显示汉字
			x += 16;
			ii += 2;
		}
		else
		{
			ch2[0] = *(ch + ii);
			ch2[1] = '\0'; // 字母占一个字节
			if (TYPE8X16 == ascii_size)
			{
				OLED_P8x16Str(x, y, ch2, F8X16); // 显示字母
				x += 8;
			}
			else if (TYPE6X8 == ascii_size)
			{
				OLED_P6x8Str(x, y, ch2, F6x8); // 显示字母
				x += 6;
			}

			ii += 1;
		}
	}
}

/// @brief  显示BMP图片128×64
/// @param x  起始坐标x
/// @param y  起始坐标y
/// @param bmp
void Draw_BMP(u8 x, u8 y, const u8 *bmp)
{
	u8 wm = 0;
	u8 adder = 0;

	OLED_Set_Pos(x, y);
	for (wm = 0; wm < 16; wm++)
	{
		OLED_WrDat(*(bmp + adder));
		adder += 1;
	}
	OLED_Set_Pos(x, y + 8);
	for (wm = 0; wm < 16; wm++)
	{
		OLED_WrDat(*(bmp + adder));
		adder += 1;
	}
	/* u32 ii=0;
	 u8 x,y;

	 if(y1%8==0) y=y1/8;
	 else y=y1/8+1;
	   for(y=y0;y<=y1;y++)
	   {
		   OLED_Set_Pos(x0,y);
	   for(x=x0;x<x1;x++)
		   {
			   OLED_WrDat(bmp[ii++]);
		   }
	   }	*/
}

/**
 * @brief  OLED初始化
 * @param  无
 * @retval 无
 */
void OLED_Init(void)
{
	OLED_WrCmd(0xAE); // 关闭显示
	OLED_WrCmd(0xD5); // 设置显示时钟分频比/振荡器频率
	OLED_WrCmd(0x80);
	OLED_WrCmd(0xA8); // 设置多路复用率
	OLED_WrCmd(0x3F);
	OLED_WrCmd(0xD3); // 设置显示偏移
	OLED_WrCmd(0x00);
	OLED_WrCmd(0x40); // 设置显示开始行
	OLED_WrCmd(0xA1); // 设置左右方向，0xA1正常 0xA0左右反置
	OLED_WrCmd(0xC8); // 设置上下方向，0xC8正常 0xC0上下反置
	OLED_WrCmd(0xDA); // 设置COM引脚硬件配置
	OLED_WrCmd(0x12);
	OLED_WrCmd(0x81); // 设置对比度控制
	OLED_WrCmd(0xCF);
	OLED_WrCmd(0xD9); // 设置预充电周期
	OLED_WrCmd(0xF1);
	OLED_WrCmd(0xDB); // 设置VCOMH取消选择级别
	OLED_WrCmd(0x30);
	OLED_WrCmd(0xA4); // 设置整个显示打开/关闭
	OLED_WrCmd(0xA6); // 设置正常/倒转显示
	OLED_WrCmd(0x8D); // 设置充电泵
	OLED_WrCmd(0x14);
	OLED_WrCmd(0xAF); // 开启显示
	OLED_Fill(0);	  // OLED清屏
	OLED_Set_Pos(0, 0);
}